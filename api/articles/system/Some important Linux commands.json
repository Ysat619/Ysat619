{"title":"一些好用但鲜为人知的 Linux 命令","uid":"5e7254d63639ed21d8e1e8e2812eb98c","slug":"system/Some important Linux commands","date":"2022-07-08T03:15:20.000Z","updated":"2022-07-14T04:43:58.290Z","comments":true,"path":"api/articles/system/Some important Linux commands.json","keywords":null,"cover":null,"content":"<h2 id=\"系统监视\"><a href=\"#系统监视\" class=\"headerlink\" title=\"系统监视\"></a>系统监视</h2><h3 id=\"Uptime\"><a href=\"#Uptime\" class=\"headerlink\" title=\"Uptime\"></a>Uptime</h3><p>Uptime会返回<strong>服务器运行时长</strong>、<strong>当前时间</strong>、<strong>用户数量</strong>和<strong>内存使用平均数</strong>等信息。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ <span class=\"token function\">uptime</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"Wall\"><a href=\"#Wall\" class=\"headerlink\" title=\"Wall\"></a>Wall</h3><p>Wall可以向当前登录到系统的每个人的终端发送消息</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ wall <span class=\"token string\">\"Your message\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"Top\"><a href=\"#Top\" class=\"headerlink\" title=\"Top\"></a>Top</h3><p>实时显示 CPU 和内存使用情况的进程列表。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ <span class=\"token function\">top</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"lsof\"><a href=\"#lsof\" class=\"headerlink\" title=\"lsof\"></a>lsof</h3><p>lsof是一个单一的命令，用于一个基本的目的：<strong>L</strong>i<strong>s</strong>t <strong>O</strong>pen <strong>F</strong>iles。这在遇到说文件被使用的挂载问题时特别有用。这个命令可以快速识别哪些文件被哪些进程使用。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ <span class=\"token function\">lsof</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"网络\"><a href=\"#网络\" class=\"headerlink\" title=\"网络\"></a>网络</h2><h3 id=\"Netcat\"><a href=\"#Netcat\" class=\"headerlink\" title=\"Netcat\"></a>Netcat</h3><p><code>Netcat</code>、<code>nc</code>主要用于端口扫描，但实际上是一个伟大的实用网络工具，可供系统管理员在他们的后袋中用于任何任务。Netcat可以支持端口扫描、文件复制、端口转发、代理服务器和托管服务器……可以说，它的功能非常全面。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage:</span>\n$ <span class=\"token function\">nc</span> <span class=\"token parameter variable\">-vz</span> <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>port<span class=\"token operator\">></span> <span class=\"token comment\"># 检查给定端口上两个主机之间的连接</span>\n$ <span class=\"token function\">nc</span> <span class=\"token parameter variable\">-l</span> <span class=\"token number\">8080</span> <span class=\"token operator\">|</span> <span class=\"token function\">nc</span> <span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span> <span class=\"token number\">80</span> <span class=\"token comment\"># 创建一个代理服务器</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"Netstat\"><a href=\"#Netstat\" class=\"headerlink\" title=\"Netstat\"></a>Netstat</h3><p>Netstat返回各种网络的详细信息，如路由表（routing tables）、网络连接（network connections）、成员资格（memberships）、统计信息（stats）、标志（flags）等。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage </span>\n$ <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-a</span> <span class=\"token comment\"># 查看所有网络端口</span>\n$ <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-tlpn</span> <span class=\"token comment\"># 查看所有监听中的端口</span>\n\n<span class=\"token comment\"># Key Flags</span>\n<span class=\"token parameter variable\">-s</span> <span class=\"token operator\">=</span> display networking statistics\n<span class=\"token parameter variable\">-v</span> <span class=\"token operator\">=</span> be verbose\n<span class=\"token parameter variable\">-r</span> <span class=\"token operator\">=</span> show routing tables\n<span class=\"token parameter variable\">-i</span> <span class=\"token operator\">=</span> display interface table\n<span class=\"token parameter variable\">-g</span> <span class=\"token operator\">=</span> show group memeberships<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"Nslookup\"><a href=\"#Nslookup\" class=\"headerlink\" title=\"Nslookup\"></a>Nslookup</h3><p>用于获取网络或本地的服务器信息。它查询DNS以找到服务器信息，这对网络调试很有用。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage</span>\n$ <span class=\"token function\">nslookup</span> bilibili.com\nServer:\t\t<span class=\"token number\">183.60</span>.83.19\nAddress:\t<span class=\"token number\">183.60</span>.83.19<span class=\"token comment\">#53</span>\nNon-authoritative answer:\nName:\tbilibili.com\nAddress: <span class=\"token number\">47.103</span>.24.173\nName:\tbilibili.com\nAddress: <span class=\"token number\">139.159</span>.241.37\nName:\tbilibili.com\nAddress: <span class=\"token number\">120.92</span>.78.97\nName:\tbilibili.com\nAddress: <span class=\"token number\">119.3</span>.70.188\nName:\tbilibili.com\nAddress: <span class=\"token number\">8.134</span>.50.24\n<span class=\"token comment\"># Key Flags</span>\n<span class=\"token parameter variable\">-port</span> <span class=\"token operator\">=</span> Change port number <span class=\"token keyword\">for</span> connection\n<span class=\"token parameter variable\">-type</span> <span class=\"token operator\">=</span> Change <span class=\"token builtin class-name\">type</span> of query. \n<span class=\"token parameter variable\">-domain</span> <span class=\"token operator\">=</span> Sets search list to name<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"TCPDump\"><a href=\"#TCPDump\" class=\"headerlink\" title=\"TCPDump\"></a>TCPDump</h3><p>用于捕获和分析进出你的系统的流量。它是一个强大的多功能工具，专门用于调试和排除网络问题，但也可以作为一个安全工具使用。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage</span>\n$ tcpdump\n$ tcpdump <span class=\"token parameter variable\">-i</span> <span class=\"token operator\">&lt;</span>interface<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>ipaddress or hostname<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>port<span class=\"token operator\">></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h2><h3 id=\"rsync\"><a href=\"#rsync\" class=\"headerlink\" title=\"rsync\"></a>rsync</h3><p>用于将文件和目录复制到目的地，类似于<code>cp</code>命令。但是，它也允许复制到远程位置，并且可以提供进度条，这通常用于备份</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage</span>\n$ <span class=\"token function\">rsync</span> <span class=\"token parameter variable\">-vap</span> --ignore-existing <span class=\"token operator\">&lt;</span>source_file<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>destination_file<span class=\"token operator\">></span>\n\n<span class=\"token comment\">#  Key flags:</span>\n<span class=\"token function\">v</span> <span class=\"token operator\">=</span> verbrose\nr <span class=\"token operator\">=</span> recursive\np <span class=\"token operator\">=</span> preserve permissions\ng <span class=\"token operator\">=</span> group\no <span class=\"token operator\">=</span> owner\na <span class=\"token operator\">=</span> archive\n<span class=\"token parameter variable\">--progress</span> <span class=\"token operator\">=</span> progresss bar<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"screen\"><a href=\"#screen\" class=\"headerlink\" title=\"screen\"></a>screen</h3><p>如果你需要在远程运行一个长时间的任务（如系统备份、ftp 传输等等），用 screen 就不用担心 SSH 会话中断而导致的任务中断了，Screen 会在断开连接的情况下继续运行你的命令！</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># Example Usage</span>\n$ <span class=\"token function\">screen</span> <span class=\"token comment\"># 启动一个 screen 会话</span>\n$ <span class=\"token function\">screen</span> <span class=\"token parameter variable\">-ls</span> <span class=\"token comment\"># 显示正在运行中的服务</span>\n$ <span class=\"token function\">screen</span> <span class=\"token parameter variable\">-r</span> <span class=\"token comment\"># 连接会话</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"date\"><a href=\"#date\" class=\"headerlink\" title=\"date\"></a>date</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 将Unix timestamp转换为人类可读的日期形式</span>\n$ <span class=\"token function\">date</span> <span class=\"token parameter variable\">--date</span> @1657252922\nFri Jul  <span class=\"token number\">8</span> <span class=\"token number\">12</span>:02:02 CST <span class=\"token number\">2022</span>\n\n<span class=\"token comment\"># 获取当前的时间戳</span>\n$ <span class=\"token function\">date</span> <span class=\"token string\">\"+%s\"</span>\n<span class=\"token number\">1657252922</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"systemd\"><a href=\"#systemd\" class=\"headerlink\" title=\"systemd\"></a>systemd</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 列出所有Systemd服务</span>\n$ systemctl <span class=\"token parameter variable\">-l</span> <span class=\"token parameter variable\">-t</span> <span class=\"token function\">service</span> <span class=\"token operator\">|</span> <span class=\"token function\">less</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n","text":"系统监视UptimeUptime会返回服务器运行时长、当前时间、用户数量和内存使用平均数等信息。 $ uptime WallWall可以向当前登录到系统的每个人...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"操作系统","slug":"操作系统","count":2,"path":"api/categories/操作系统.json"}],"tags":[{"name":"linux","slug":"linux","count":2,"path":"api/tags/linux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E7%9B%91%E8%A7%86\"><span class=\"toc-text\">系统监视</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Uptime\"><span class=\"toc-text\">Uptime</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Wall\"><span class=\"toc-text\">Wall</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Top\"><span class=\"toc-text\">Top</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#lsof\"><span class=\"toc-text\">lsof</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BD%91%E7%BB%9C\"><span class=\"toc-text\">网络</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Netcat\"><span class=\"toc-text\">Netcat</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Netstat\"><span class=\"toc-text\">Netstat</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Nslookup\"><span class=\"toc-text\">Nslookup</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#TCPDump\"><span class=\"toc-text\">TCPDump</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B6%E4%BB%96\"><span class=\"toc-text\">其他</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#rsync\"><span class=\"toc-text\">rsync</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#screen\"><span class=\"toc-text\">screen</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#date\"><span class=\"toc-text\">date</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#systemd\"><span class=\"toc-text\">systemd</span></a></li></ol></li></ol>","author":{"name":"Joshlee","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{}},"mapped":true,"hidden":false,"prev_post":{"title":"阿里云 ACP 云原生微服务","uid":"31cb8022faa8493f1aedc9b9cc8dea4f","slug":"examination/AliyunACP","date":"2022-07-27T00:59:03.000Z","updated":"2023-08-18T06:20:35.908Z","comments":true,"path":"api/articles/examination/AliyunACP.json","keywords":null,"cover":[],"text":" 考点总结 ","link":"","photos":[],"count_time":{"symbolsCount":7,"symbolsTime":"1 mins."},"categories":[{"name":"应试","slug":"应试","count":5,"path":"api/categories/应试.json"}],"tags":[{"name":"考证","slug":"考证","count":1,"path":"api/tags/考证.json"}],"author":{"name":"Joshlee","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{}}},"next_post":{"title":"Spring Security Note（TODO）","uid":"c86bf2873749be4c9a292e4ee1b5c907","slug":"backend/spring_security_note","date":"2022-06-05T07:34:41.000Z","updated":"2022-11-12T00:04:20.461Z","comments":true,"path":"api/articles/backend/spring_security_note.json","keywords":null,"cover":null,"text":" 简介Spring Security 是 Spring 家族中的一个安全管理框架。 一般 Web 应用需要进行认证和授权 认证：验证当前访问系统的是不是本系统的...","link":"","photos":[],"count_time":{"symbolsCount":366,"symbolsTime":"1 mins."},"categories":[{"name":"后端","slug":"后端","count":1,"path":"api/categories/后端.json"}],"tags":[{"name":"后端","slug":"后端","count":1,"path":"api/tags/后端.json"}],"author":{"name":"Joshlee","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{}}}}