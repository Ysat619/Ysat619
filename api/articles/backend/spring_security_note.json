{"title":"Spring Security Note（TODO）","uid":"c86bf2873749be4c9a292e4ee1b5c907","slug":"backend/spring_security_note","date":"2022-06-05T07:34:41.000Z","updated":"2022-11-12T00:04:20.461Z","comments":true,"path":"api/articles/backend/spring_security_note.json","keywords":null,"cover":null,"content":"<meta name=\"referrer\" content=\"no-referrer\"/>\n\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p>Spring Security 是 Spring 家族中的一个安全管理框架。</p>\n<p>一般 Web 应用需要进行<strong>认证</strong>和<strong>授权</strong></p>\n<p>认证：验证当前访问系统的是不是本系统的用户，并且要确认具体是哪个用户</p>\n<p>授权：经过认证后判断当前用户是否有权限进行某个操作</p>\n<h2 id=\"Quick-start\"><a href=\"#Quick-start\" class=\"headerlink\" title=\"Quick start\"></a>Quick start</h2><h2 id=\"认证（Authentication）\"><a href=\"#认证（Authentication）\" class=\"headerlink\" title=\"认证（Authentication）\"></a>认证（Authentication）</h2><h3 id=\"登录校验流程\"><a href=\"#登录校验流程\" class=\"headerlink\" title=\"登录校验流程\"></a>登录校验流程</h3><h3 id=\"解决问题\"><a href=\"#解决问题\" class=\"headerlink\" title=\"解决问题\"></a>解决问题</h3><h4 id=\"思路分析\"><a href=\"#思路分析\" class=\"headerlink\" title=\"思路分析\"></a>思路分析</h4><h5 id=\"登录\"><a href=\"#登录\" class=\"headerlink\" title=\"登录\"></a>登录</h5><ol>\n<li>自定义登录接口<ol>\n<li>调用 <code>ProviderManager</code> 的方法进行认证，如果认证通过生成 JWT</li>\n<li>把用户信息存入 Redis 中</li>\n</ol>\n</li>\n<li>自定义 <code>UserDetailsService</code><ol>\n<li>在这个类中实现列中去查询数据库</li>\n</ol>\n</li>\n</ol>\n<h5 id=\"校验\"><a href=\"#校验\" class=\"headerlink\" title=\"校验\"></a>校验</h5><p>定义 JWT 认证过滤器</p>\n<ol>\n<li>获取 Token</li>\n<li>解析 Token 获取其中的 userId</li>\n<li>从 Redis 中获取用户信息</li>\n<li>存入 <code>SecurityContextHolder</code></li>\n</ol>\n","text":" 简介Spring Security 是 Spring 家族中的一个安全管理框架。 一般 Web 应用需要进行认证和授权 认证：验证当前访问系统的是不是本系统的用户，并且要确认具体是哪个用户 授权：经过认证后判断当前用户是否有权限进行某个操作 Quick start认证（Auth...","link":"","photos":[],"count_time":{"symbolsCount":366,"symbolsTime":"1 mins."},"categories":[{"name":"后端","slug":"后端","count":1,"path":"api/categories/后端.json"}],"tags":[{"name":"后端","slug":"后端","count":1,"path":"api/tags/后端.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">简介</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Quick-start\"><span class=\"toc-text\">Quick start</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%A4%E8%AF%81%EF%BC%88Authentication%EF%BC%89\"><span class=\"toc-text\">认证（Authentication）</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">登录校验流程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">解决问题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90\"><span class=\"toc-text\">思路分析</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">登录</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%A0%A1%E9%AA%8C\"><span class=\"toc-text\">校验</span></a></li></ol></li></ol></li></ol></li></ol>","author":{"name":"Jx","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"一些好用但鲜为人知的 Linux 命令","uid":"5e7254d63639ed21d8e1e8e2812eb98c","slug":"system/Some important Linux commands","date":"2022-07-08T03:15:20.000Z","updated":"2022-07-14T04:43:58.290Z","comments":true,"path":"api/articles/system/Some important Linux commands.json","keywords":null,"cover":null,"text":"系统监视UptimeUptime会返回服务器运行时长、当前时间、用户数量和内存使用平均数等信息。 $ uptime WallWall可以向当前登录到系统的每个人的终端发送消息 $ wall &quot;Your message&quot; Top实时显示 CPU 和内存使用情况的...","link":"","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"操作系统","slug":"操作系统","count":2,"path":"api/categories/操作系统.json"}],"tags":[{"name":"linux","slug":"linux","count":2,"path":"api/tags/linux.json"}],"author":{"name":"Jx","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"转-HumanSystemOptimization","uid":"635215656b0faa819fe0d4b468a19e3e","slug":"life/HumanSystemOptimization","date":"2022-05-31T16:46:27.000Z","updated":"2022-07-14T04:43:58.290Z","comments":true,"path":"api/articles/life/HumanSystemOptimization.json","keywords":null,"cover":null,"text":" 原文: https://github.com/zijie0/HumanSystemOptimization 背景去年 5 月曾经写了一篇文章介绍了下 Lex Fridman 大佬的日常生活安排，后续我也根据他的方法对自己的日常生活做了一系列规范和改进。这一年整体实行下来，效果还...","link":"","photos":[],"count_time":{"symbolsCount":"18k","symbolsTime":"16 mins."},"categories":[{"name":"生活","slug":"生活","count":2,"path":"api/categories/生活.json"}],"tags":[{"name":"人生","slug":"人生","count":2,"path":"api/tags/人生.json"}],"author":{"name":"Jx","slug":"blog-author","avatar":"/images/avatar.png","link":"/","description":"这个人很菜，什么也没有留下","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}